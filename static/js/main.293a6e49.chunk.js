(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{17:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(11),i=n.n(a),s=(n(17),n(2)),o=n.n(s),j=n(5),d=n(10),u=n(7),l=n(4),h=n(9),b=n.n(h),p=n(0),x=r.a.createContext(),f=function(e){var t=e.children,n=Object(c.useState)([]),r=Object(l.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(null),h=Object(l.a)(s,2),f=h[0],O=h[1],m=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&units=metric&appid=91d2f9efc77a289707cbc8c106b46727"));case 2:if(404===(n=e.sent).status){e.next=13;break}return e.next=6,n.json();case 6:return c=e.sent,e.next=9,w(c.coord.lon,c.coord.lat);case 9:r=e.sent,i([].concat(Object(d.a)(a),[{city:Object(j.a)(Object(j.a)({},c),{},{time:b()().format("LTS")}),forecast:r}])),e.next=14;break;case 13:alert("Error - Invalid Location Entered");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(n,"&lon=").concat(t,"&exclude=current,minutely,hourly,alerts&units=metric&appid=91d2f9efc77a289707cbc8c106b46727"));case 2:return c=e.sent,e.next=5,c.json();case 5:return r=e.sent,console.log(r),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){return new Promise((function(e,t){navigator.geolocation.getCurrentPosition(e,t)}))},v=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,c,r,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:return t=e.sent,n=t.coords.latitude,c=t.coords.longitude,e.next=7,fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(n,"&lon=").concat(c,"&units=metric&appid=91d2f9efc77a289707cbc8c106b46727"));case 7:return r=e.sent,e.next=10,r.json();case 10:return s=e.sent,e.next=13,w(n,c);case 13:u=e.sent,i([].concat(Object(d.a)(a),[{city:Object(j.a)(Object(j.a)({},s),{},{time:b()().format("LTS")}),forecast:u}]));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)(x.Provider,{value:{weatherData:a,currentForecast:f,getCityData:m,getLongLatData:v,getLocation:g,setCurrentForecast:O,updateCurrentForecast:function(e){O(a[e].forecast)}},children:t})},O=function(){return Object(c.useContext)(x)},m=function(e){var t=e.weatherData,n=e.index,c=O().updateCurrentForecast;return Object(p.jsxs)("div",{id:t.id,className:"weather-card",onClick:function(){return c(n)},children:[Object(p.jsx)("h3",{children:t.name}),Object(p.jsxs)("p",{className:"weather-info",children:["Time: ",t.time]}),Object(p.jsx)("hr",{}),Object(p.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(t.weather[0].icon,".png"),alt:"weather icon"}),Object(p.jsx)("p",{className:"weather-info",children:t.weather[0].description}),Object(p.jsxs)("p",{className:"weather-info",children:[t.main.temp,"\xb0C"]}),Object(p.jsx)("hr",{}),Object(p.jsxs)("p",{className:"weather-info",children:["Humidity: ",t.main.humidity,"%"]}),Object(p.jsxs)("p",{className:"weather-info",children:["Sunset:"," ",new Date(1e3*t.sys.sunset).toLocaleTimeString("en-GB"),"pm"]})]})},w=function(){var e=O().weatherData;return Object(p.jsx)("div",{id:"weather-data-container",children:0!==e.length?e.map((function(e,t){return Object(p.jsx)(m,{index:t,weatherData:e.city},t)})):Object(p.jsx)("div",{})})},g=n(12),v=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],a=O(),i=a.getLongLatData,s=a.getCityData;return Object(p.jsxs)("form",{id:"location-searchbar",children:[Object(p.jsx)("input",{id:"location-input",type:"text",placeholder:"Search for a location",onChange:function(e){return r(e.target.value)}}),Object(p.jsx)("button",{id:"search-btn",type:"submit",onClick:function(e){e.preventDefault(),s(n)},disabled:""===n,children:"Submit"}),Object(p.jsx)("button",{id:"current-location-btn",type:"submit",onClick:function(e){e.preventDefault(),i()},children:Object(p.jsx)(g.a,{})})]})},y=function(e){var t=e.day;return Object(p.jsxs)("div",{className:"forecast-card",children:[Object(p.jsx)("h4",{className:"daily-weather-info",children:new Date(1e3*t.dt).toLocaleDateString("en-GB")}),Object(p.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(t.weather[0].icon,".png"),alt:"weather icon"}),Object(p.jsx)("p",{className:"forecast-info",children:t.weather[0].description}),Object(p.jsxs)("table",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{}),Object(p.jsx)("td",{children:"Temp"}),Object(p.jsx)("td",{children:"Feels Like"})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Morning"}),Object(p.jsxs)("td",{children:[t.temp.morn,"\xb0C"]}),Object(p.jsxs)("td",{children:[t.feels_like.morn,"\xb0C"]})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Afternoon"}),Object(p.jsxs)("td",{children:[t.temp.day,"\xb0C"]}),Object(p.jsxs)("td",{children:[t.feels_like.day,"\xb0C"]})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Evening"}),Object(p.jsxs)("td",{children:[t.temp.eve,"\xb0C"]}),Object(p.jsxs)("td",{children:[t.feels_like.eve,"\xb0C"]})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Night"}),Object(p.jsxs)("td",{children:[t.temp.night,"\xb0C"]}),Object(p.jsxs)("td",{children:[t.feels_like.night,"\xb0C"]})]})]})]})},C=function(){var e=O().currentForecast;return Object(p.jsx)("div",{id:"daily-weather-forecast",children:e&&e.daily.map((function(e,t){if(0!==t)return Object(p.jsx)(y,{day:e},t)}))})},k=function(){return Object(p.jsxs)("div",{id:"app-container",children:[Object(p.jsx)(v,{}),Object(p.jsx)(w,{}),Object(p.jsx)(C,{})]})};n(21);i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(f,{children:Object(p.jsx)(k,{})})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.293a6e49.chunk.js.map