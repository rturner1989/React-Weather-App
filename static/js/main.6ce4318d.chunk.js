(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{17:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(11),i=n.n(a),s=(n(17),n(2)),o=n.n(s),d=n(3),j=n(8),u=n(7),h=n(5),l=n(10),b=n.n(l),p=n(0),f=r.a.createContext(),x=function(e){var t=e.children,n=Object(c.useState)([]),r=Object(h.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(null),l=Object(h.a)(s,2),x=l[0],O=l[1],m=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<16;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},w=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&units=metric&appid=91d2f9efc77a289707cbc8c106b46727"));case 2:if(404===(n=e.sent).status){e.next=13;break}return e.next=6,n.json();case 6:return c=e.sent,e.next=9,v(c.coord.lon,c.coord.lat);case 9:r=e.sent,a.find((function(e){return e.city.id===c.id}))||i([].concat(Object(j.a)(a),[{city:Object(d.a)(Object(d.a)({},c),{},{time:b()().format("LTS")}),forecast:r}])),e.next=14;break;case 13:alert("Error - Invalid Location Entered");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var c,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(n,"&lon=").concat(t,"&exclude=current,minutely,hourly,alerts&units=metric&appid=91d2f9efc77a289707cbc8c106b46727"));case 2:return c=e.sent,e.next=5,c.json();case 5:return r=e.sent,(a=Object(j.a)(r.daily))[1].id=m(),a[2].id=m(),a[3].id=m(),a[4].id=m(),a[5].id=m(),a[6].id=m(),a[7].id=m(),e.abrupt("return",Object(d.a)(Object(d.a)({},r),{},{daily:a}));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){return new Promise((function(e,t){navigator.geolocation.getCurrentPosition(e,t)}))},y=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,c,r,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:return t=e.sent,n=t.coords.latitude,c=t.coords.longitude,e.next=7,fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(n,"&lon=").concat(c,"&units=metric&appid=91d2f9efc77a289707cbc8c106b46727"));case 7:if(404===(r=e.sent).status){e.next=16;break}return e.next=11,r.json();case 11:return s=e.sent,e.next=14,v(c,n);case 14:u=e.sent,a.find((function(e){return e.city.id===s.id}))||i([].concat(Object(j.a)(a),[{city:Object(d.a)(Object(d.a)({},s),{},{time:b()().format("LTS")}),forecast:u}]));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)(f.Provider,{value:{weatherData:a,currentForecast:x,getCityData:w,getLongLatData:y,getLocation:g,setCurrentForecast:O,updateCurrentForecast:function(e){O(a[e].forecast)}},children:t})},O=function(){return Object(c.useContext)(f)},m=function(e){var t=e.weatherData,n=e.index,c=O().updateCurrentForecast,r=t.weather[0].description.replace(/(^\w{1})|(\s+\w{1})/g,(function(e){return e.toUpperCase()}));return Object(p.jsxs)("div",{id:t.id,className:"weather-card",onClick:function(){return c(n)},children:[Object(p.jsxs)("div",{className:"weather-info",children:[Object(p.jsx)("h3",{children:t.name}),Object(p.jsxs)("p",{children:["Time: ",t.time]})]}),Object(p.jsxs)("div",{className:"weather-info",children:[Object(p.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(t.weather[0].icon,".png"),alt:"weather icon"}),Object(p.jsx)("p",{children:r}),Object(p.jsxs)("p",{children:[Math.round(t.main.temp),"\xb0C"]})]}),Object(p.jsxs)("div",{className:"weather-info",children:[Object(p.jsxs)("p",{children:["Humidity: ",t.main.humidity,"%"]}),Object(p.jsxs)("p",{children:["Sunset:"," ",new Date(1e3*t.sys.sunset).toLocaleTimeString("en-GB"),"pm"]})]})]})},w=function(){var e=O().weatherData;return Object(p.jsx)("div",{id:"weather-data-container",children:0!==e.length?e.map((function(e,t){return Object(p.jsx)(m,{index:t,weatherData:e.city},t)})):Object(p.jsx)("div",{})})},v=n(12),g=function(){var e=Object(c.useState)(""),t=Object(h.a)(e,2),n=t[0],r=t[1],a=O(),i=a.getLongLatData,s=a.getCityData;return Object(p.jsx)("div",{id:"location-searchbar",children:Object(p.jsxs)("form",{className:"location-bar",children:[Object(p.jsx)("input",{id:"location-input",type:"text",placeholder:"Search for a location",onChange:function(e){return r(e.target.value)}}),Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{id:"search-btn",type:"submit",onClick:function(e){e.preventDefault(),s(n)},disabled:""===n,children:"Submit"}),Object(p.jsx)("button",{id:"current-location-btn",type:"submit",onClick:function(e){e.preventDefault(),i()},children:Object(p.jsx)(v.a,{})})]})]})})},y=function(e){var t=e.day,n=t.weather[0].description.replace(/(^\w{1})|(\s+\w{1})/g,(function(e){return e.toUpperCase()}));return Object(p.jsxs)("div",{className:"forecast-card",children:[Object(p.jsx)("h4",{className:"daily-weather-info",children:new Date(1e3*t.dt).toLocaleDateString("en-GB")}),Object(p.jsx)("img",{src:"http://openweathermap.org/img/wn/".concat(t.weather[0].icon,".png"),alt:"weather icon"}),Object(p.jsx)("p",{className:"forecast-info",children:n}),Object(p.jsxs)("p",{className:"forecast-info",children:[" Humidity: ",t.humidity,"%"]}),Object(p.jsx)("table",{children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{}),Object(p.jsx)("th",{children:"Temp"}),Object(p.jsx)("th",{children:"Feels Like"})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Morning"}),Object(p.jsxs)("td",{children:[Math.round(t.temp.morn),"\xb0C"]}),Object(p.jsxs)("td",{children:[Math.round(t.feels_like.morn),"\xb0C"]})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Afternoon"}),Object(p.jsxs)("td",{children:[Math.round(t.temp.day),"\xb0C"]}),Object(p.jsxs)("td",{children:[Math.round(t.feels_like.day),"\xb0C"]})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Evening"}),Object(p.jsxs)("td",{children:[Math.round(t.temp.eve),"\xb0C"]}),Object(p.jsxs)("td",{children:[Math.round(t.feels_like.eve),"\xb0C"]})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Night"}),Object(p.jsxs)("td",{children:[Math.round(t.temp.night),"\xb0C"]}),Object(p.jsxs)("td",{children:[Math.round(t.feels_like.night),"\xb0C"]})]})]})})]})},C=function(){var e=O().currentForecast;return Object(p.jsx)("div",{id:"daily-weather-forecast",children:e&&e.daily.map((function(e,t){if(0!==t)return Object(p.jsx)(y,{day:e},e.id)}))})},k=function(){return Object(p.jsxs)("div",{id:"app-container",children:[Object(p.jsx)(g,{}),Object(p.jsx)(w,{}),Object(p.jsx)(C,{})]})};n(21);i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(x,{children:Object(p.jsx)(k,{})})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.6ce4318d.chunk.js.map