(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{21:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(14),i=n.n(a),s=(n(21),n(3)),o=n(4),d=n.n(o),h=n(5),j=n(11),l=n(10),u=n(7),b=n.n(u),x=n(1),p=r.a.createContext(),O=function(e){var t=e.children,n=Object(c.useState)([]),r=Object(s.a)(n,2),a=r[0],i=r[1],o=Object(c.useState)(null),u=Object(s.a)(o,2),O=u[0],f=u[1],m=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<16;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},w=function(){var e=Object(l.a)(d.a.mark((function e(t){var n,c,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://turner-weather-api.herokuapp.com/weather/current?q=".concat(t,"&units=metric"));case 2:if(404===(n=e.sent).status){e.next=15;break}return e.next=6,n.json();case 6:return c=e.sent,r=c.results,e.next=10,v(r.coord.lon,r.coord.lat);case 10:s=e.sent,console.log(r),a.find((function(e){return e.city.id===r.id}))||i([].concat(Object(j.a)(a),[{city:Object(h.a)(Object(h.a)({},r),{},{date:b()().format("LL"),time:b()().format("LTS")}),forecast:s}])),e.next=16;break;case 15:alert("Error - Invalid Location Entered");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(l.a)(d.a.mark((function e(t,n){var c,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://turner-weather-api.herokuapp.com/weather/forecast?lat=".concat(n,"&lon=").concat(t,"&exclude=current,minutely,hourly,alerts&units=metric"));case 2:return c=e.sent,e.next=5,c.json();case 5:return r=e.sent,(a=Object(j.a)(r.results.daily))[1].id=m(),a[2].id=m(),a[3].id=m(),a[4].id=m(),a[5].id=m(),a[6].id=m(),a[7].id=m(),e.abrupt("return",Object(h.a)(Object(h.a)({},r),{},{daily:a}));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){return new Promise((function(e,t){navigator.geolocation.getCurrentPosition(e,t)}))},g=function(){var e=Object(l.a)(d.a.mark((function e(){var t,n,c,r,s,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return t=e.sent,n=t.coords.latitude,c=t.coords.longitude,e.next=7,fetch("https://turner-weather-api.herokuapp.com/weather/current?lat=".concat(n,"&lon=").concat(c,"&units=metric"));case 7:if(404===(r=e.sent).status){e.next=17;break}return e.next=11,r.json();case 11:return s=e.sent,o=s.results,e.next=15,v(c,n);case 15:l=e.sent,a.find((function(e){return e.city.id===o.id}))||i([].concat(Object(j.a)(a),[{city:Object(h.a)(Object(h.a)({},o),{},{date:b()().format("LL"),time:b()().format("LTS")}),forecast:l}]));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)(p.Provider,{value:{weatherData:a,currentForecast:O,getCityData:w,getLongLatData:g,getLocation:y,setCurrentForecast:f,updateCurrentForecast:function(e){f(a[e].forecast)}},children:t})},f=function(){return Object(c.useContext)(p)},m=n(13),w=n(15),v=n(9),y=function(e){var t=e.weatherData,n=e.index,c=e.position,r=f().updateCurrentForecast,a=t.weather[0].description.replace(/(^\w{1})|(\s+\w{1})/g,(function(e){return e.toUpperCase()}));return Object(x.jsxs)("div",{id:t.id,className:"".concat(c?"weather-card ".concat(c):"weather-card"),tabIndex:"0",onClick:function(){return r(n)},onKeyUp:function(){return r(n)},children:[Object(x.jsxs)("div",{className:"weather-info",children:[Object(x.jsxs)("h3",{id:"weather-header",children:[t.name," ",Object(x.jsx)("span",{id:"weather-country",children:t.sys.country})]}),Object(x.jsx)("p",{id:"weather-date",children:t.date}),Object(x.jsx)("p",{id:"weather-time",children:t.time})]}),Object(x.jsxs)("div",{className:"weather-info",id:"weather-temp-info",children:[Object(x.jsx)("img",{id:"weather-img",src:"https://openweathermap.org/img/wn/".concat(t.weather[0].icon,".png"),alt:"weather icon",role:"presentation"}),Object(x.jsx)("p",{id:"weather-description",children:a}),Object(x.jsxs)("p",{id:"weather-temp",children:[Math.round(t.main.temp),"\xb0C"]})]}),Object(x.jsxs)("div",{className:"weather-info",children:[Object(x.jsxs)("p",{id:"weather-humidity",children:[Object(x.jsx)("span",{children:"Humidity:"}),Object(x.jsxs)("span",{id:"humidity-data",children:[t.main.humidity,"%"]}),Object(x.jsx)("span",{className:"icon",id:"humidity-icon",children:Object(x.jsx)(v.a,{"aria-hidden":!0,focusable:!1})})]}),Object(x.jsxs)("p",{id:"weather-sunset",children:[Object(x.jsx)("span",{children:"Sunset: "}),Object(x.jsxs)("span",{children:[new Date(1e3*t.sys.sunset).toLocaleTimeString("en-GB"),"pm"]}),Object(x.jsx)("span",{className:"icon",id:"sunset-icon",children:Object(x.jsx)(w.a,{"aria-hidden":!0,focusable:!1})})]})]})]})},g=function(){var e=f().weatherData,t=Object(c.useState)({}),n=Object(s.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(0),o=Object(s.a)(i,2),d=o[0],h=o[1];return Object(c.useEffect)((function(){var e=function(){a(function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}())};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(c.useEffect)((function(){h(e.length-1)}),[e]),0===e.length?Object(x.jsx)("div",{id:"weather-data-container",children:Object(x.jsx)("div",{})}):r.width<=450||r.width<=900?Object(x.jsxs)("div",{id:"weather-data-container",children:[e.map((function(e,t){var n=t<d?"previous-card":t>d?"next-card":"active-card";return Object(x.jsx)(y,{index:t,weatherData:e.city,position:n},e.city.id)})),Object(x.jsx)("label",{htmlFor:"prev-btn",className:"hidden-label",children:"Previous Weather Card"}),Object(x.jsx)("button",{id:"prev-btn",type:"button",className:"prev-next-btn",onClick:function(){d>0&&h(d-1)},children:Object(x.jsx)(m.a,{className:"btn-icon",id:"prev-btn-icon","aria-hidden":!0,focusable:!1})}),Object(x.jsx)("label",{htmlFor:"next-btn",className:"hidden-label",children:"Next Weather Card"}),Object(x.jsx)("button",{type:"button",id:"next-btn",className:"prev-next-btn",onClick:function(){d<e.length-1&&h(d+1)},children:Object(x.jsx)(m.b,{className:"btn-icon",id:"next-btn-icon","aria-hidden":!0,focusable:!1})})]}):Object(x.jsx)("div",{id:"weather-data-container",children:e.map((function(e,t){return Object(x.jsx)(y,{index:t,weatherData:e.city},e.city.id)}))})},C=n(16),N=function(){var e=f(),t=e.getLongLatData,n=e.getCityData,r=Object(c.useState)(""),a=Object(s.a)(r,2),i=a[0],o=a[1];return Object(x.jsx)("form",{id:"location-searchbar",children:Object(x.jsxs)("div",{className:"location-bar",children:[Object(x.jsx)("label",{htmlFor:"location-input",className:"hidden-label",children:"Location Input"}),Object(x.jsx)("input",{id:"location-input",type:"text",value:i,placeholder:"Search for a location",onChange:function(e){o(e.target.value)},tabIndex:"0"}),Object(x.jsx)("label",{htmlFor:"search-btn",className:"hidden-label",children:"Search Button"}),Object(x.jsx)("button",{id:"search-btn",type:"submit",onClick:function(e){e.preventDefault(),n(i),o("")},disabled:""===i,children:"Submit"}),Object(x.jsx)("label",{htmlFor:"current-location-btn",className:"hidden-label",children:"Current Location Button"}),Object(x.jsx)("button",{id:"current-location-btn",onClick:function(e){e.preventDefault(),t()},children:Object(x.jsx)(C.a,{id:"location-icon","aria-hidden":!0,focusable:!1})})]})})},k=function(e){var t=e.day,n=t.weather[0].description.replace(/(^\w{1})|(\s+\w{1})/g,(function(e){return e.toUpperCase()}));return Object(x.jsxs)("div",{className:"forecast-card",children:[Object(x.jsxs)("div",{className:"forecast-weather-info",id:"forecast-temp-info",children:[Object(x.jsx)("h4",{id:"forecast-header",children:new Date(1e3*t.dt).toLocaleDateString("en-GB")}),Object(x.jsx)("img",{id:"forecast-img",src:"https://openweathermap.org/img/wn/".concat(t.weather[0].icon,".png"),alt:"forecast weather icon",role:"presentation"}),Object(x.jsx)("p",{id:"forecast-description",children:n})]}),Object(x.jsxs)("p",{id:"forecast-humidity",children:[Object(x.jsx)("span",{children:"Humidity:"}),Object(x.jsxs)("span",{id:"forecast-humidity-data",children:[t.humidity,"%"]}),Object(x.jsx)("span",{className:"icon",id:"forecast-humidity-icon",children:Object(x.jsx)(v.a,{"aria-hidden":!0,focusable:!1})})]}),Object(x.jsx)("table",{className:"forecast-weather-info",children:Object(x.jsxs)("tbody",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{}),Object(x.jsx)("th",{children:"Temp"}),Object(x.jsx)("th",{children:"Feels Like"})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Morning"}),Object(x.jsxs)("td",{children:[Math.round(t.temp.morn),"\xb0C"]}),Object(x.jsxs)("td",{children:[Math.round(t.feels_like.morn),"\xb0C"]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Afternoon"}),Object(x.jsxs)("td",{children:[Math.round(t.temp.day),"\xb0C"]}),Object(x.jsxs)("td",{children:[Math.round(t.feels_like.day),"\xb0C"]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Evening"}),Object(x.jsxs)("td",{children:[Math.round(t.temp.eve),"\xb0C"]}),Object(x.jsxs)("td",{children:[Math.round(t.feels_like.eve),"\xb0C"]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Night"}),Object(x.jsxs)("td",{children:[Math.round(t.temp.night),"\xb0C"]}),Object(x.jsxs)("td",{children:[Math.round(t.feels_like.night),"\xb0C"]})]})]})})]})},L=function(){var e=f().currentForecast;return Object(x.jsx)("div",{id:"daily-weather-forecast",children:e&&e.daily.map((function(e,t){if(0!==t)return Object(x.jsx)(k,{day:e},e.id)}))})},D=function(){return Object(x.jsxs)("div",{id:"app-container",children:[Object(x.jsx)(N,{}),Object(x.jsx)(g,{}),Object(x.jsx)(L,{})]})};i.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(O,{children:Object(x.jsx)(D,{})})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.b38cef43.chunk.js.map